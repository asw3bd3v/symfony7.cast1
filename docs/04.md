# Magical Flex Recipes

## Flex Aliases / Псевдонимы Flex

Псевдонимы просты. Чтобы добавить новый пакет в ваше приложение — что мы сделаем через минуту — вы запускаете composer require, а затем имя пакета, например symfony/http-client. Flex дает самым важным пакетам в экосистеме Symfony более короткое имя, называемое псевдонимом. Например, у symfony/http-client есть псевдоним с именем http-client. Да, мы могли бы запустить composer require http-client, и Flex переведет его в конечное имя пакета. Это просто сокращение при добавлении пакетов.

## The Recipes System / Система рецептов

Вторая суперсила, которую Symfony Flex добавляет в Composer, — это рецепты. Они увлекательны. Когда вы добавляете новый пакет, у него может быть рецепт, который по сути является набором файлов, которые будут добавлены в ваш проект. И оказывается, что каждый файл, с которого мы начинали — в bin/, config/, public/ — все они пришли из рецептов пакетов, которые были изначально установлены.

Например, symfony/framework-bundle — это «основной» пакет Symfony Framework. Вы можете ознакомиться с его рецептом, перейдя в репозиторий symfony/recipes и перейдя к symfony, framework-bundle, затем к последней версии. Бум! Проверьте config/packages/: большая часть того, с чего мы начали, взята из этого рецепта!

Другой способ увидеть рецепты — в командной строке. Запустите:

```
composer recipes
```

## Installing PHP CS Fixer / Установка PHP CS Fixer

Давайте попробуем это: добавим новый пакет PHP-CS-Fixer, который предоставит нам исполняемый файл для исправления стиля нашего кода. Например, в src/Controller/MainController.php, если вы следуете стандартам кодирования PHP, фигурная скобка должна находиться на следующей строке после функции. Если бы мы сделали что-то подобное, наш файл теперь нарушал бы эти стандарты. Это бы ничему не повредило, но, знаете ли, мы хотим, чтобы наш код выглядел чистым. И PHP-CS-Fixer может нам в этом помочь.

Чтобы установить его, запустите:

```
composer require cs-fixer-shim
```

И да, это псевдоним. На самом деле, настоящий пакет — php-cs-fixer/shim.

## Investigating the Recipe / Расследование рецепта

Давайте разберемся с этим! Откройте .gitignore. Круто! Внизу добавлены две новые записи для двух общих файлов, которые вы хотите игнорировать при использовании PHP CS fixer.

```
// ... lines 1 - 11
###> php-cs-fixer/shim ###
/.php-cs-fixer.php
/.php-cs-fixer.cache
###< php-cs-fixer/shim ###
```

Рецепт также добавил новый файл .php-cs-fixer.dist.php. Это файл конфигурации CS Fixer. И проверьте его!

```php
// .php-cs-fixer.dist.php
$finder = (new PhpCsFixer\Finder())
    ->in(__DIR__)
    ->exclude('var')
;
return (new PhpCsFixer\Config())
    ->setRules([
        '@Symfony' => true,
    ])
    ->setFinder($finder)
;
```

Он уже встроен для работы с нашим приложением Symfony. Он говорит ему исправить все файлы в текущем каталоге, но игнорировать каталог var/, потому что именно там Symfony хранит свои файлы кэша. Он также говорит ему использовать набор правил, называемый Symfony. Это означает, что мы хотим, чтобы наш стиль кода соответствовал стилю Symfony. Суть в том, что вместо того, чтобы тратить время на поиски этой конфигурации по умолчанию... мы просто получаем ее!

Последний измененный файл — symfony.lock. Он отслеживает, какие рецепты мы установили и в какой версии. И да, мы собираемся зафиксировать все эти файлы в нашем репозитории.

## Using PHP-CS-Fixer / Использование PHP-CS-Fixer

Теперь, когда мы установили пакет, давайте его использовать. Для этого запустите:

```
./vendor/bin/php-cs-fixer fix
```

